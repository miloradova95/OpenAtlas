<p class="mt-3">
  {{ _('hello')|uc_first }} <strong>{{ current_user.username }}</strong>.
  {% if session.login_previous_success %}
    {{ _('last login')|uc_first }}: {{ session.login_previous_success }}.
    {% if session.login_previous_failures > 0 %}
      - {{ _('failed logins')|uc_first }}:
      {{ session.login_previous_failures }}
    {% endif %}
  {% else %}
    {{ _('first login') }}
  {% endif %}
  {{ _('want a new feature or experience any problems')|uc_first }}:
  <a href="{{ url_for('index_feedback') }}">{{ _('tell us about it') }}</a>.
  {% if g.settings.mail and not current_user.settings.newsletter %}
    {{ _('want to receive updates? Activate the newsletter in your')|uc_first }}
    {{ _('profile')|link(url_for('profile_index'))|safe }}
  {% endif %}
</p>
<div id="example-table"></div>
<script>
  // Initialize Tabulator when the DOM is fully loaded
  document.addEventListener("DOMContentLoaded", function () {
    // Create Tabulator on DOM element with id "example-table"
    var table = new Tabulator("#example-table", {
      layout:"fitColumns",
      pagination:"local",
      paginationSize:6,
      paginationSizeSelector:[3, 6, 8, 10],
      movableColumns:true,
      paginationCounter:"rows",
      ajaxURL: "/data", // URL for fetching data
      autoColumns: true,
      autoColumnsDefinitions: function (definitions) {
        //definitions - array of column definition objects

        definitions.forEach((column) => {
          column.headerFilter = true; // add header filter to every column
        });

        return definitions;
      },
    });
  });
</script>
<div class="row">
  {% if tables.overview.rows %}
    <div class="col-12 col-sm-6" style="max-width: 500px">
      {{ tables.overview.display('overview')|safe }}
    </div>
  {% endif %}
  {% if tables.latest.rows %}
    <div class="col-12 col-sm-6">
      {{ tables.latest.display('latest')|safe }}
      <div class="toolbar">
        {{ _('Show all activity')|button(url_for('user_activity'))|safe }}
      </div>
    </div>
  {% endif %}
</div>
